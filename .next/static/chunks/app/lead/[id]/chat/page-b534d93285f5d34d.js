(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{5426:function(e,r,t){Promise.resolve().then(t.bind(t,2045))},6463:function(e,r,t){"use strict";var o=t(1169);t.o(o,"notFound")&&t.d(r,{notFound:function(){return o.notFound}}),t.o(o,"useParams")&&t.d(r,{useParams:function(){return o.useParams}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},2045:function(e,r,t){"use strict";t.d(r,{default:function(){return s}});var o=t(7437),n=t(2265),a=t(6463);function s(e){let{leadId:r}=e,t=(0,a.useRouter)(),[s,i]=(0,n.useState)(""),[u,d]=(0,n.useState)(!1),[c,l]=(0,n.useState)(""),f=async e=>{if(e.preventDefault(),l(""),!s.trim()){l("Mesaj boş olamaz");return}d(!0);try{let e=await fetch("/api/chat/".concat(r,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderType:"PATIENT",body:s.trim()})});if(201===e.status)i(""),t.refresh();else{var o;let r=await e.json();(null===(o=r.fieldErrors)||void 0===o?void 0:o.body)?l(r.fieldErrors.body[0]):l(r.error||"Bir hata oluştu")}}catch(e){l("Bağlantı hatası")}finally{d(!1)}};return(0,o.jsxs)("form",{onSubmit:f,children:[c&&(0,o.jsx)("div",{style:{padding:12,backgroundColor:"#fee2e2",border:"1px solid #dc2626",borderRadius:4,marginBottom:12,color:"#991b1b",fontSize:14},children:c}),(0,o.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:"Mesajınızı yazın...",style:{width:"100%",padding:12,border:"1px solid #ccc",borderRadius:4,fontSize:14,minHeight:80,resize:"vertical",marginBottom:12},maxLength:2e3}),(0,o.jsx)("button",{type:"submit",disabled:u,style:{padding:"10px 20px",backgroundColor:u?"#9ca3af":"#2563eb",color:"#fff",border:"none",borderRadius:4,fontSize:14,fontWeight:500,cursor:u?"not-allowed":"pointer"},children:u?"G\xf6nderiliyor…":"G\xf6nder"})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5426)}),_N_E=e.O()}]);
"use strict";(()=>{var e={};e.id=1296,e.ids=[1296],e.modules={3524:e=>{e.exports=require("@prisma/client")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2990:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var r={};a.r(r),a.d(r,{GET:()=>p});var s=a(9303),n=a(8716),o=a(670),i=a(7070),u=a(6890),d=a(3538);async function c(){let e=new Date,t=new Date(e.getTime()-6048e5),a=new Date(e.getTime()-864e5),r=await d._.lead.count(),s=await d._.lead.count({where:{createdAt:{gte:t}}}),n=await d._.lead.count({where:{createdAt:{gte:a}}}),o=await d._.lead.count({where:{status:{not:"CLOSED"}}}),i=await d._.lead.groupBy({by:["status"],_count:{status:!0}}),u={NEW:0,IN_REVIEW:0,OFFER_SENT:0,CLOSED:0};for(let e of i){let t=e.status;t in u&&(u[t]=e._count.status)}return{totals:{total:r,last7d:s,last24h:n,open:o},statusCounts:u,recentAudits:await d._.leadAudit.findMany({take:20,orderBy:{createdAt:"desc"},select:{id:!0,leadId:!0,action:!0,createdAt:!0,actor:!0}})}}async function p(e){let t=(0,u.k)(e);if(t)return t;let a=await c();return i.NextResponse.json(a,{status:200})}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/cms/dashboard/route",pathname:"/api/cms/dashboard",filename:"route",bundlePath:"app/api/cms/dashboard/route"},resolvedPagePath:"C:\\Users\\MustafaNazliHamiTour\\Desktop\\MedDiscover\\03-platform\\M01-lead-intake\\src\\app\\api\\cms\\dashboard\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:h}=l,g="/api/cms/dashboard/route";function w(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,5972,600],()=>a(2990));module.exports=r})();